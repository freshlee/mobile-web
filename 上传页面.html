<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="preview" ng-controller="viewCtrl">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <meta name="viewport" content="width=device-width,height=device-height, user-scalable=no,initial-scale=1, minimum-scale=1, maximum-scale=1,target-densitydpi=device-dpi ">  
<link rel="stylesheet" href="http://apps.bdimg.com/libs/bootstrap/3.3.4/css/bootstrap.css" />
 <script src="http://apps.bdimg.com/libs/angular.js/1.4.6/angular.min.js"></script> 
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<style>
*{
	margin:0;
	padding: 0;
}
	.header{
		height: 40px;
		background: #1E90FF;
		text-align: center;
	}
	.header strong{
		line-height: 40px;
		font-size: 1.1em;
	}
	.content{
		height: 150px;
		text-align: left;
	}
	.container{
		border: 1px solid black;
	}
	.container  img {
		height: 100px;
	}
</style>
<title>无标题文档</title>
</head>
<body>
	<div class="header"><strong>上传驾照{{test}}</strong></div>
	<div class="content" style="text-align: center;">
		<input type="date" />,你已通过所有考试获得驾照，请上传您的驾照图片
		<div><label for="licence">驾照</label><input type="file"  id="licence" style="display: none" /></div>
	</div>
	<div class="container"><img ng-repeat="x in thumb" src={{x.imgSrc}}></div></div>
	<button class="btn btn-info center-block" >上传</button>
</body>
<script>
	var mymodel=angular.module("preview",[]);
	mymodel.directive("imgPreview",function(){
		return{
            template:"<li></li>"
		}
	})
	mymodel.controller("viewCtrl",function($scope){
    $scope.thumb=new Array
	function addview(){
	$scope.file=document.getElementById('licence').files;
    $scope.test="test";
    $scope.fileName = $scope.file[0].name; 
    var postfix = $scope.fileName.substring($scope.fileName.lastIndexOf(".")+1).toLowerCase(); 
    if(postfix !="jpg" && postfix !="png"){ 
     alert("图片仅支持png、jpg类型的文件"); 
     $scope.fileName = ""; 
     $scope.file = null; 
     $scope.$apply(); 
     return false; 
    } 
    $scope.reader = new FileReader(); //创建一个FileReader接口 
    console.log($scope.reader); 
    if ($scope.file) { 
     //获取图片（预览图片） 
     $scope.reader.readAsDataURL($scope.file[0]); //FileReader的方法，把图片转成base64 
     $scope.reader.onload = function(ev) { 
      $scope.$apply(function(){ 
       $scope.thumb.push({ 
        imgSrc : ev.target.result  //接收base64，scope.thumb.imgSrc为图片。 
       });
      }); 
     }; 
    }else{ 
     alert('上传图片不能为空!'); 
    } 
		}

    document.getElementById('licence').onchange=function(){
      addview();
    }

	})
</script>
</html>